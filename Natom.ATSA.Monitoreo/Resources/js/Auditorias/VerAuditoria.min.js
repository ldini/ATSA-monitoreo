function Anular(n){var t=n;Mensajes.MostrarSiNo("¿Desea anular la auditoría de la factura?\nATENCIÓN: La factura volverá a quedar como pendiente de auditar",function(){MostrarCargando();$.ajax({type:"POST",url:"/monitoreotest/auditorias/AnularAuditoria",data:JSON.stringify({facturaId:t}),dataType:"json",contentType:"application/json",success:function(n){OcultarCargando();n.success?($("#tblPendientes").DataTable().ajax.reload(),$("#tblAuditados").DataTable().ajax.reload()):Mensajes.MostrarError(n.error)}})})}function AbrirModal(n){var t=n,i=$(this).attr("data-btnid");MostrarCargando();$.ajax({url:"/monitoreotest/auditorias/ModalCrearAuditoria?facturaid="+t,method:"GET",dataType:"html",success:function(n){$("#ModalDiv").html(n);$("#ModalDiv").find("#modalAuditoria").modal("show");$("#BtnAuditarId").val(i);OcultarCargando()}})}$(document).ready(function(){var n=$("#CargaId").val(),t=0,i=$("#tblPendientes").dataTable({bProcessing:!0,bServerSide:!0,ajax:{url:"/monitoreotest/auditorias/ObtenerListadoFacturas?cargaid="+n+"&auditada=False",type:"POST"},bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,order:[[9,"desc"]],aoColumns:[{bSortable:!0,sWidth:"10%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"12%"},{bSortable:!0,sWidth:"23%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"3%"},{bSortable:!0,sWidth:"21%"},{bSortable:!0,sWidth:"8%"},{bSortable:!0,sWidth:"5%"},{bSortable:!1,sWidth:"6%",mRender:function(n,i,r){var f=r[11],u="";return f&&(u+='<a class="btn btn-primary btn-xs btn-auditar btnAuditarFactura" onclick="AbrirModal('+r[10]+')" data-facturaid="'+r[10]+'" data-btnid="'+t+'">Auditar<\/a>'),t++,u}}]}),r=$("#tblAuditados").dataTable({bProcessing:!0,bServerSide:!0,ajax:{url:"/monitoreotest/auditorias/ObtenerListadoFacturas?cargaid="+n+"&auditada=True",type:"POST"},bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,order:[[9,"desc"]],aoColumns:[{bSortable:!0,sWidth:"10%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"12%"},{bSortable:!0,sWidth:"23%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"3%"},{bSortable:!0,sWidth:"21%"},{bSortable:!0,sWidth:"8%"},{bSortable:!0,sWidth:"5%"},{bSortable:!1,sWidth:"6%",mRender:function(n,t,i){return'<a class="btn btn-danger btn-xs btn-anular-auditoria btnAnularAuditoria" onclick="Anular('+i[10]+')" data-facturaid="'+i[10]+'">Anular<\/a>'}}]})});