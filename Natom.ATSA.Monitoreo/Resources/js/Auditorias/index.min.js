function GetUrl(){var n=$("#FiltroEstado").val();return n.length>0&&(n="?filtro="+n),"/monitoreotest/auditorias/ObtenerListadoIndex"+n}$(document).ready(function(){$("#Status").chosen();$("#Status").change(function(){var n=GetUrl();n+=n.indexOf("?")>=0?"&status="+$("#Status").val():"?status="+$("#Status").val();$("#tbl").DataTable().ajax.url(n);$("#tbl").DataTable().ajax.reload()});$("#FiltroEstado").val().length==0&&$("#divfiltros").show();var n=$("#tbl").dataTable({bProcessing:!0,bServerSide:!0,ajax:{url:GetUrl(),type:"POST"},bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,order:[[6,"desc"]],aoColumns:[{bSortable:!0,sWidth:"14%"},{bSortable:!0,sWidth:"9%"},{bSortable:!0,sWidth:"8%"},{bSortable:!0,sWidth:"24%"},{bSortable:!0,sWidth:"9%"},{bSortable:!0,sWidth:"15%"},{bSortable:!1,sWidth:"21%",mRender:function(n,t,i){var r="",y=i[7],u=i[8],f=i[9],e=i[10],o=i[11],s=i[12],h=i[13],c=i[14],l=i[15],a=i[16],v=i[17];return(u||s)&&a&&(r+='&nbsp;<a class="btn btn-primary btn-xs btn-auditar" id="'+n+'">Ir a Auditar <span class="glyphicon glyphicon-chevron-right"><\/span><\/a>'),(f||h)&&v&&(!o&&l?(r+='&nbsp;<a class="btn btn-success btn-xs btn-bajar-excel" id="'+n+'" title="Bajar Excel consiliación"><span class="glyphicon glyphicon-download"><\/span> excel<\/a>',e&&c&&(r+='&nbsp;<a class="btn btn-warning btn-xs btn-subir-excel" id="'+n+'" title="Subir Excel consiliación"><span class="glyphicon glyphicon-upload"><\/span> excel<\/a>')):r+='&nbsp;<a class="btn btn-warning btn-xs btn-consiliar" id="'+n+'">Ir a Consiliar <span class="glyphicon glyphicon-chevron-right"><\/span><\/a>'),r}}]});$("#tbl").on("click",".btn-eliminar",function(n){var i=n.currentTarget.id,t=$(this).is("[puede]");t?Mensajes.MostrarSiNo("¿Desea eliminar la carga?",function(){alert("Eliminar");$("#tbl").DataTable().ajax.url("/monitoreotest/cargas/ObtenerListadoIndex");$("#tbl").DataTable().ajax.reload()}):Mensajes.MostrarError("No puedes eliminar la carga porque ya se encuentra en auditoría.")});$("#tbl").on("click",".btn-auditar",function(n){var t=n.currentTarget.id;location.href="/monitoreotest/auditorias/VerAuditoria?cargaid="+t});$("#tbl").on("click",".btn-consiliar",function(n){var t=n.currentTarget.id;location.href="/monitoreotest/auditorias/VerConsiliacion?cargaid="+t});$("#tbl").on("click",".btn-bajar-excel",function(n){var t=n.currentTarget.id;location.href="/monitoreotest/auditorias/DownloadExcelAuditoria?cargaId="+t;setTimeout(function(){$("#tbl").DataTable().ajax.reload()},4e3)});$("#tbl").on("click",".btn-subir-excel",function(n){var t=n.currentTarget.id;CargarExcelAuditorias(t)})});