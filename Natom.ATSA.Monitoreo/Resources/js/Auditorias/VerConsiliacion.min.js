function Anular(n){var t=n;Mensajes.MostrarSiNo("¿Desea anular la consiliación de la factura?\nATENCIÓN: La factura volverá a quedar como pendiente de consiliar",function(){MostrarCargando();$.ajax({type:"POST",url:"/monitoreotest/auditorias/AnularConsiliacion",data:JSON.stringify({facturaId:t}),dataType:"json",contentType:"application/json",success:function(n){OcultarCargando();n.success?($("#tblPendientes").DataTable().ajax.reload(),$("#tblAuditados").DataTable().ajax.reload()):Mensajes.MostrarError(n.error)}})})}function AbrirModal(n){var t=n,i=$(this).attr("data-btnid");MostrarCargando();$.ajax({url:"/monitoreotest/auditorias/ModalCrearConsiliacion?facturaid="+t,method:"GET",dataType:"html",success:function(n){$("#ModalDiv").html(n);$("#ModalDiv").find("#modalConsiliacion").modal("show");$("#BtnAuditarId").val(i);OcultarCargando()}})}$(document).ready(function(){var n=$("#CargaId").val(),t=0,i=$("#tblPendientes").dataTable({bProcessing:!0,bServerSide:!0,ajax:{url:"/monitoreotest/auditorias/ObtenerListadoFacturasConsiliacion?cargaid="+n+"&consiliada=False",type:"POST"},bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,order:[[9,"desc"]],aoColumns:[{bSortable:!0,sWidth:"10%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"12%"},{bSortable:!0,sWidth:"23%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"3%"},{bSortable:!0,sWidth:"19%"},{bSortable:!0,sWidth:"8%"},{bSortable:!0,sWidth:"5%"},{bSortable:!1,sWidth:"8%",mRender:function(n,i,r){var f=r[11],u="";return f&&(u+='<a class="btn btn-warning btn-xs btn-auditar btnConsiliarFactura" onclick="AbrirModal('+r[10]+')" data-facturaid="'+r[10]+'" data-btnid="'+t+'">Consiliar<\/a>'),t++,u}}]}),r=$("#tblAuditados").dataTable({bProcessing:!0,bServerSide:!0,ajax:{url:"/monitoreotest/auditorias/ObtenerListadoFacturasConsiliacion?cargaid="+n+"&consiliada=True",type:"POST"},bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,order:[[9,"desc"]],aoColumns:[{bSortable:!0,sWidth:"10%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"12%"},{bSortable:!0,sWidth:"23%"},{bSortable:!0,sWidth:"4%"},{bSortable:!0,sWidth:"3%"},{bSortable:!0,sWidth:"21%"},{bSortable:!0,sWidth:"8%"},{bSortable:!0,sWidth:"5%"},{bSortable:!1,sWidth:"6%",mRender:function(n,t,i){return'<a class="btn btn-danger btn-xs btn-anular-auditoria btnAnularConsiliacion" onclick="Anular('+i[10]+')" data-facturaid="'+i[10]+'">Anular<\/a>'}}]})});