function RenderPago(n,t,i,r){return n==null?'<a class="btn btn-warning btn-xs" onclick="SetearMonto('+i+", "+t+", "+r+')" style="width:100%" num-pago="'+t+'" id="'+i+'">Pagar '+t+"<\/a>":'<a class="btn btn-success btn-xs" onclick="EliminarPago('+i+", "+t+')" num-pago="'+t+'" id="'+i+'">$ '+n.toFixed(2).replace(".",",")+"<\/a>"}function SetearMonto(n,t,i){var r=n,u=t;GetSaldoCuentaPrestadorSumaFacturas(i,function(n){var i="",t,f,e;if(n.saldo<0&&(i="   [ Suma saldo facturas a favor prestador: $"+(n.saldo*-1).toFixed(2).replace(".",",")+"] "),t=prompt("Ingrese monto ($): "+i,"0,00"),t!=null){if(f=r,e=u,t=parseFloat(t.trim().replace(",",".")),t==0){Mensajes.MostrarError("El monto ingresado no puede ser cero.");return}Mensajes.MostrarSiNo("El monto ingresado es <b>$ "+t.toFixed(2).replace(".",",")+"<\/b>.<br/>¿Es correcto?",function(){UpdatePago(f,e,t)})}})}function EliminarPago(n,t){var i=n,r=t;Mensajes.MostrarSiNo("¿Desea eliminar el pago "+t+"?",function(){LimpiarPago(i,r)})}function LimpiarPago(n,t){UpdatePago(n,t,null)}function UpdatePago(n,t,i){MostrarCargando();$.ajax({type:"POST",url:"/monitoreotest/pagos/UpdatePago",data:JSON.stringify({comprobanteId:n,numPago:t,monto:i}),dataType:"json",contentType:"application/json",success:function(n){OcultarCargando();n.success?$("#tbl").DataTable().ajax.reload():Mensajes.MostrarError(n.error)}})}function RenderObs(n,t){return n==null||n==""?'<a class="btn btn-default btn-xs" onclick="AbrirObs(this)" observacion="" style="width:100%" id="'+t+'"><span class="glyphicon glyphicon-eye-open"><\/span><\/a>':'<a class="btn btn-primary btn-xs" onclick="AbrirObs(this)" id="'+t+'" observacion="'+n+'" style="width:100%"><span class="glyphicon glyphicon-eye-open"><\/span><\/a>'}function AbrirObs(n){var i=$(n).attr("id"),t=$(n).attr("observacion");(t=prompt("Observación:",t),t!=null)&&(t.length>200&&(t=t.substring(0,200)),MostrarCargando(),$.ajax({type:"POST",url:"/monitoreotest/pagos/UpdateObs",data:JSON.stringify({comprobanteId:i,observaciones:t}),dataType:"json",contentType:"application/json",success:function(n){OcultarCargando();n.success?$("#tbl").DataTable().ajax.reload():Mensajes.MostrarError(n.error)}}))}$(document).ready(function(){$("#filtroTipo, #filtroPrestador, #filtroEstado, #filtroPeriodoMes, #filtroPeriodoAnio").chosen();$("#filtroTipo, #filtroPrestador, #filtroEstado, #filtroPeriodoMes, #filtroPeriodoAnio").change(function(){var n=$("#filtroTipo").val(),t=$("#filtroPrestador").val(),i=$("#filtroEstado").val(),r=$("#filtroPeriodoMes").val(),u=$("#filtroPeriodoAnio").val(),f="/monitoreotest/pagos/ObtenerListadoIndex?tipoComprobanteId="+n+"&prestadorId="+t+"&mesPeriodo="+r+"&anioPeriodo="+u+"&estado="+i;$("#tbl").DataTable().ajax.url(f);$("#tbl").DataTable().ajax.reload()});var n=$("#tbl").dataTable({bProcessing:!0,bServerSide:!0,ajax:{url:"/monitoreotest/pagos/ObtenerListadoIndex",type:"POST"},bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,order:[[0,"asc"]],aoColumns:[{bSortable:!0,sWidth:"23%"},{bSortable:!0,sWidth:"10%"},{bSortable:!0,sWidth:"11%"},{bSortable:!0,sWidth:"6%"},{bSortable:!0,sWidth:"6%"},{bSortable:!0,sWidth:"12%"},{bSortable:!0,sWidth:"7%"},{bSortable:!0,sWidth:"7%"},{bSortable:!1,sWidth:"5%",mRender:function(n,t,i){return RenderPago(n,1,i[12],i[13])}},{bSortable:!1,sWidth:"5%",mRender:function(n,t,i){return RenderPago(n,2,i[12],i[13])}},{bSortable:!1,sWidth:"5%",mRender:function(n,t,i){return RenderPago(n,3,i[12],i[13])}},{bSortable:!1,sWidth:"3%",mRender:function(n,t,i){return RenderObs(n,i[12])}},{bVisible:!1}]})});